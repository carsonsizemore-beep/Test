<!DOCTYPE html>
<html>
<head>
  <title>Pay to Make Me Happy âš¡ï¸</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://webln.fiatjaf.com/webln.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 50px; background: #f0f8ff; }
    .face { font-size: 200px; transition: all 0.8s; }
    button { font-size: 24px; padding: 15px 30px; margin: 20px; cursor: pointer; border-radius: 12px; border: none; background: #00b4b4; color: white; }
    button:hover { background: #008f8f; }
    h1 { font-size: 2.5em; }
  </style>
</head>
<body>
  <h1>I'm feeling down... ğŸ˜¢</h1>
  <div class="face">ğŸ˜¢</div>
  <p>Send me some sats to cheer me up!</p>
  
  <button onclick="sendSats(21)">Send 21 sats ğŸ˜Š</button><br>
  <button onclick="sendSats(100)">Send 100 sats ğŸ˜„</button><br>
  <button onclick="sendSats(1000)">Send 1,000 sats ğŸ¤—</button>

  <script>
    async function sendSats(amount) {
      if (!window.webln) {
        alert("No WebLN detected! Use a Lightning wallet like Alby, Wallet of Satoshi, or open this page inside Strike/Blink/Mutiny etc.");
        return;
      }

      try {
        await webln.enable();

        // This calls your Strike Lightning Address directly
        const response = await fetch(`https://api.strike.me/v1/invoices/lnurl?username=carson_sizemore&amount=${amount}&currency=SATS`);
        const invoiceData = await response.json();

        const result = await webln.sendPayment(invoiceData.pr);

        if (result.preimage) {
          document.querySelector('.face').textContent = 'ğŸ¥¹â¤ï¸';
          document.querySelector('h1').innerHTML = 'THANK YOU!!! âš¡ï¸<br>You made my day!';
          
          // Confetti effect (optional fun)
          confetti && confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

          // Reset after 15 seconds (or remove this if you want it permanent)
          setTimeout(() => {
            document.querySelector('.face').textContent = 'ğŸ˜¢';
            document.querySelector('h1').textContent = "I'm feeling down again... ğŸ˜¢";
          }, 15000);
        }
      } catch (e) {
        console.error(e);
        alert("Payment failed or canceled: " + (e.message || e));
      }
    }

    // Optional: tiny confetti library (add this for extra joy)
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js';
    document.head.appendChild(script);
  </script>
</body>
</html>